angular.module("ngUpload",[]).directive("uploadSubmit",["$parse",function(){function n(t,i){t=angular.element(t);var r=t.parent();return i=i.toLowerCase(),r&&r[0].tagName.toLowerCase()===i?r:r?n(r,i):null}return{restrict:"AC",link:function(t,i){i.bind("click",function(t){if(t&&(t.preventDefault(),t.stopPropagation()),!i.attr("disabled")){var r=n(i,"form");r.triggerHandler("submit");r[0].submit()}})}}}]).directive("ngUpload",["$log","$parse","$document",function(n,t,i){function u(n){var r=i.find("head"),t;return angular.forEach(r.find("meta"),function(i){i.getAttribute("name")===n&&(t=i)}),angular.element(t)}var r=1;return{restrict:"AC",link:function(i,f,e){function c(n){i.$isUploading=n}function v(){s.unbind("load");i.$$phase?c(!1):i.$apply(function(){c(!1)});var r=(s[0].contentDocument||s[0].contentWindow.document).body,t;try{t=angular.fromJson(r.innerText||r.textContent)}catch(u){t=r.innerHTML;n.warn("Response is not valid JSON")}i.$$phase?a(i,{content:t}):i.$apply(function(){a(i,{content:t})})}var s,h;r++;var o={},a=e.ngUpload?t(e.ngUpload):null,l=e.ngUploadLoading?t(e.ngUploadLoading):null;e.hasOwnProperty("uploadOptionsConvertHidden")&&(o.convertHidden=e.uploadOptionsConvertHidden!="false");e.hasOwnProperty("uploadOptionsEnableRailsCsrf")&&(o.enableRailsCsrf=e.uploadOptionsEnableRailsCsrf!="false");e.hasOwnProperty("uploadOptionsBeforeSubmit")&&(o.beforeSubmit=t(e.uploadOptionsBeforeSubmit));f.attr({target:"upload-iframe-"+r,method:"post",enctype:"multipart/form-data",encoding:"multipart/form-data"});s=angular.element('<iframe name="upload-iframe-'+r+'" border="0" width="0" height="0" style="width:0px;height:0px;border:none;display:none">');o.enableRailsCsrf&&(h=angular.element("<input />"),h.attr("class","upload-csrf-token"),h.attr("type","hidden"),h.attr("name",u("csrf-param").attr("content")),h.val(u("csrf-token").attr("content")),f.append(h));f.after(s);c(!1);f.bind("submit",function(){var n=i[e.name];if(n&&n.$invalid)return!1;if(o.beforeSubmit)return o.beforeSubmit();s.bind("load",v);o.convertHidden&&angular.forEach(f.find("input"),function(n){var t=angular.element(n);t.attr("ng-model")&&t.attr("type")&&t.attr("type")=="hidden"&&t.attr("value",i.$eval(t.attr("ng-model")))});i.$$phase?(l&&l(i),c(!0)):i.$apply(function(){l&&l(i);c(!0)})})}}}]);
/*
//# sourceMappingURL=ng-upload.min.js.map
*/